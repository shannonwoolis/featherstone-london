{%- capture imageGallery -%}

{%- capture icon -%}						
		{% if section.settings.icony %}

		{% if section.settings.icon == '1' %}
		<svg class="at-icon anim gicon{{ section.settings.icon }}" viewBox="0 0 426.66667 426.66667" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0"/></svg>

		{% elsif section.settings.icon == '2' %}

		<svg class="at-icon anim gicon{{ section.settings.icon }}" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" ><path d="m181.2 32a32 32 0 0 1 -32 32h-85.2v85.2a32 32 0 0 1 -64 0v-117.2a32 32 0 0 1 32-32h117.2a32 32 0 0 1 32 32zm-32 416h-85.2v-85.2a32 32 0 0 0 -64 0v117.2a32 32 0 0 0 32 32h117.2a32 32 0 1 0 0-64zm330.8-117.2a32 32 0 0 0 -32 32v85.2h-85.2a32 32 0 1 0 0 64h117.2a32 32 0 0 0 32-32v-117.2a32 32 0 0 0 -32-32zm0-330.8h-117.2a32 32 0 0 0 0 64h85.2v85.2a32 32 0 1 0 64 0v-117.2a32 32 0 0 0 -32-32z"/></svg>

		{% else %}

		<svg class="at-icon anim gicon{{ section.settings.icon }}" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="m27.707 26.293-5.969-5.969c1.412-1.724 2.262-3.926 2.262-6.324 0-5.514-4.486-10-10-10s-10 4.486-10 10 4.486 10 10 10c2.398 0 4.6-.85 6.324-2.262l5.969 5.969c.391.391 1.023.391 1.414 0s.391-1.023 0-1.414zm-21.707-12.293c0-4.411 3.589-8 8-8s8 3.589 8 8-3.589 8-8 8-8-3.589-8-8z"/><path id="XMLID_39_" d="m19 14c0 .552-.448 1-1 1h-3v3c0 .552-.448 1-1 1s-1-.448-1-1v-3h-3c-.552 0-1-.448-1-1s.448-1 1-1h3v-3c0-.552.448-1 1-1s1 .448 1 1v3h3c.552 0 1 .448 1 1z"/></svg>		
		{% endif %}

	{% endif %}
{%- endcapture -%}

{% assign secSt = section.settings %}
<div class="sec_cov{% if secSt.hidem %} hide-sm{% endif %}{% if secSt.hided %} hide-md hide-lg{% endif %}" style="--sbg:{% if secSt.bgg != blank %}{{ secSt.bgg }}{% else %}{{ secSt.bg }}{% endif %};--sst:{{ secSt.sst }}px;--ssb:{{ secSt.ssb }}px;--sstm:{{ secSt.sstm }}px;--ssbm:{{ secSt.ssbm }}px" id="{{ section.id }}" data-section-id="{{ section.id }}" data-section-type="masonary"> 	   
 
        <div class="sn{{ section.id }}{% if section.settings.sw %} fw-sec{% else %} page-width{% endif %}">     
			
            {% render 'sec-title' %}

            <div class="grid-masonary fl f-wrap gspace atgallery{{ section.settings.style }}" style="--grsp:0 -{{ section.settings.gspace | divided_by: 2.0 }}px;--grspi:0 {{ section.settings.gspace | divided_by: 2.0 }}px {{ section.settings.gspace }}px;--grspm:0 -{{ section.settings.gspacem | divided_by: 2.0 }}px;--grspim:0 {{ section.settings.gspacem | divided_by: 2.0 }}px {{ section.settings.gspacem }}px;--bdrr:{{ section.settings.radius }}px;--cl:{{ section.settings.cl }};--imgbg:rgba({{ section.settings.imgbg | color_to_rgb | replace:"rgb(","" | replace:")","" }},{{ section.settings.ttl_opa }});--txtbg:{{ section.settings.txtbg }};--bbdr:{{ section.settings.txtbg | color_darken:5 }};--iconcl:{{ section.settings.iconcl }};">
                <div class="grid-sizer-{{ section.id }} col-{{ section.settings.col }} pa"></div>
                {% for block in section.blocks limit: section.blocks.size %}
				    {% assign blkSt = block.settings %}    
					{%- capture text -%}						
							<span class="db anim">{{ blkSt.title }}</span>
							<span class="db mt5 anim">{{ blkSt.txt }}</span>
					{%- endcapture -%}					
				                
                    <div class="msitem gitem {{ blkSt.width }}-md" {{ block.shopify_attributes }}>
                        <div class="galwrap of_hidden">							
                            <a {% if section.settings.imgclick == '1' %}class="zoom pr db ltbx"{% endif %}  href="{% if section.settings.imgclick == '1' %}{{ blkSt.image | img_url:'master' }}{% else %}{{ blkSt.imgurl }}{% endif %}" data-pswp-width="{{ blkSt.image.width }}" data-pswp-height="{{ blkSt.image.height }}">
                                {% if blkSt.image!= blank %}
                                    <img loading="lazy" class="imgFl lazyload wow zoomIn" src="{{ blkSt.image | img_url: '100x' }}" width="{{ blkSt.image.width }}" height="{{ blkSt.image.height }}"
                                         data-srcset="{% render 'lazyload', image: blkSt.image, sizes: '300,500,750,1000,1350,1600,2000' %}" data-sizes="auto" alt="{{ blkSt.image.alt | escape }}" />
                                {% else %} 
                                    {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}{{ 'collection-' | append: current | placeholder_svg_tag: 'placeholder-svg' }}    
                                {% endif %}
								
								{% if section.settings.style == '1' or section.settings.style == '2' %}
								    <div class="galtxt fl f-jcc f-col all0 pa anim">
                                        {{ icon }}
                                        {% if blkSt.title != blank or blkSt.txt != blank %}<div class="fl f-col mt20">{{ text }}</div>{% endif %}
								    </div>
								{% endif %}
							   {% if section.settings.style == '3' %}<div class="galtxt fl f-jcc f-col all0 pa anim">{{ icon }}</div>{% endif %}
                            </a>
							{% if section.settings.style == '3' %}
								{% if blkSt.title != blank or blkSt.txt != blank %}<div class="galtxt pr pd20">{{ text }}</div>{% endif %}
							{% endif %}                            															
                        </div>
                    </div>        
                {% endfor %}
            </div>
        </div>  
</div>
<link rel="preload" as="style" href="{{ 'photoswipe.css' | asset_url }}" onload="this.rel='stylesheet'">
<script type="module">
    import PhotoSwipeLightbox from '{{ 'photoswipe-lightbox.min.js' | asset_url }}';
    const lightbox = new PhotoSwipeLightbox({
        gallery: '.atgallery{{ section.settings.style }}',
        children: 'a.ltbx',
        pswpModule: () => import('{{ 'photoswipe.min.js' | asset_url }}')
    });
    lightbox.init();
</script>
{%- endcapture -%}
{{ imageGallery | strip_newlines | remove: '  ' | remove: '	' }}

{% schema %}
{
    "name": "Image Gallery",
    "class":"index-section",
     "disabled_on": {
    "groups": ["header", "footer"]
    },
    "max_blocks":50,
    "settings": [
        {
            "type": "text",
            "id": "title",
            "label": "Heading",
            "default": "Image Gallery"
        },
        {
            "type": "textarea",
            "id": "subtitle",
            "label": "Sub Heading",
            "default": "Describe your products, collection etc..."
        },
        {
            "type": "paragraph",
            "content":"[grid style reference](https://www.adornthemes.com/different-collection-banner-style/)"
        },
        {
            "type": "header",
            "content": "Grid Appearance ==="
        },
        {
            "type": "range",
            "id": "gspace",
            "label": "Grid Spacing",
            "default": 30,
            "min": 0,
            "max": 50,
            "step": 1,
            "unit":"px"           
        },
        {
            "type": "range",
            "id": "gspacem",
            "label": "Grid Spacing (mobile)",
            "default": 15,
            "min": 0,
            "max": 30,
            "step": 1,
            "unit":"px"
        },
        {
            "type": "range",
            "id": "col",
            "label": "Grid Column",
            "default": 2,
            "min": 2,
            "max": 5,
            "step": 1,
            "info":"[Column Selection guide](https://www.adornthemes.com/masonry-column-selection/)"
        },
      {
            "type": "header",
            "content": "Gallery"
        },
		 {
            "type": "select",
            "id": "style",
            "label": "Gallery Style",
            "default": "1",
            "options": [
                {
                    "value": "1",
                    "label": "Style 1"
                },
                {
                    "value": "2",
                    "label": "Style 2"
                },
                {
                    "value": "3",
                    "label": "Style 3"
                }
            ]
        },
      {
            "type": "select",
            "id": "imgclick",
            "label": "On Click",
            "default": "1",
            "options": [
                {
                    "value": "1",
                    "label": "Open Lightbox Popup"
                },
                {
                    "value": "2",
                    "label": "Redirect to Url"
                }               
            ]
        },		
		{
            "type":"checkbox",
            "id":"icony",
            "label":"Show Image Hover Icon?",
            "default":true
        },
		 {
            "type": "select",
            "id": "icon",
            "label": "Icon",
            "default": "1",
            "options": [
                {
                    "value": "1",
                    "label": "Icon 1"
                },
                {
                    "value": "2",
                    "label": "Icon 2"
                },
                {
                    "value": "3",
                    "label": "Icon 3"
                }
            ]
        },		
 		{
            "type":"color",
            "id":"iconcl",
            "label":"Icon",
            "default":"#111"
        },
        {
            "type":"color",
            "id":"imgbg",
            "label":"Background(image hover)",
            "default":"#fff"
        },
		 {
            "type": "range",
            "id": "ttl_opa",
            "min": 0,
            "max": 1,
            "step": 0.1,
            "label": "Background Opacity",
            "unit": "%",
            "default": 0.7
        },
       {
            "type":"color",
            "id":"cl",
            "label":"Text",
            "default":"#111"
        },
		{
            "type":"color",
            "id":"txtbg",
            "label":"Text Background",
            "default":"#fff"
        },
        {
            "type": "range",
            "id": "radius",
            "label": "Image Rounded Corner",
            "default": 0,
            "min": 0,
            "max": 20,
            "step": 1
        },
		{
            "type": "header",
            "content": "Section"
        },
		{
            "type": "paragraph",
            "content": "Spacing ===="
        },
		{
			"type": "range",
			"id": "sst",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Top",
			"unit": "px",
			"default":30
        },
		{
			"type": "range",
			"id": "ssb",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Bottom",
			"unit": "px",
			"default":30
        },
		{
            "type": "paragraph",
            "content": "Spacing (mobile) ===="
        },
		{
			"type": "range",
			"id": "sstm",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Top",
			"unit": "px",
			"default":15
        },
		{
			"type": "range",
			"id": "ssbm",
			"min": 0,
			"max": 100,
			"step": 5,
			"label": "Bottom",
			"unit": "px",
			"default":15
        },
        {
            "type": "color",
            "id": "bg",
            "label": "Background",
            "default":"#fafafa"
        },
        {
            "type": "color_background",
            "id": "bgg",
            "label": "Gradient Background"
        },
        {
            "type":"checkbox",
            "id":"sw",
            "label":"Fullwidth?",
            "default": false
        },
		{
            "type": "checkbox",
            "id": "hidem",
            "label": "Hide on Mobile?",
            "default": false
        },
        {
            "type": "checkbox",
            "id": "hided",
            "label": "Hide on Desktop?",
            "default": false
        } 	 
    ],
    "blocks":[
        {
            "name":"Image",
            "type":"lookbook1",
            "settings":[
                {
                    "type":"image_picker",
                    "id":"image",
                    "label":"Add Image"
                },               
                {
                    "type":"textarea",
                    "id":"title",
                    "label":"Text Line 1",
                    "default":"<b>STREET STYLE</b>"
                },
                {
                    "type":"textarea",
                    "id":"txt",
                    "label":"Text Line 2",
                    "default":"GREAT SUMMER CLEARANCE SALES"
                },
                {
                    "type":"url",
                    "id":"imgurl",
                    "label":"Url"                   
                },
                {
                    "type": "select",
                    "id": "width",
                    "label": "Column width",
                    "default": "wd50",
                    "info":"Total width of all block should be 100%",
                    "options": [
                        { "value": "wd20", "label": "20%" },
                        { "value": "wd25", "label": "25%" },
                        { "value": "wd33", "label": "33%" },
                        { "value": "wd40", "label": "40%" },
                        { "value": "wd50", "label": "50%" },
                        { "value": "wd60", "label": "60%" },
                        { "value": "wd66", "label": "66%" },
                        { "value": "wd75", "label": "75%" },
                        { "value": "wd80", "label": "80%" },
                        { "value": "w_100", "label": "100%" }
                    ]
                }
            ]
        }
    ],
    "presets": [
        {
            "name": "Image Gallery",
            "blocks": [
                {
                    "type": "lookbook1"
                },
                {
                    "type": "lookbook1"
                }
            ]
        }
    ]
}
{% endschema %}
